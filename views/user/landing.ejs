
    <!-- Header part end-->
    <%-include('../../views/partials/user/header.ejs')%>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
            .custom-swal-toast {
                border-radius: 10px;
                box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
                color: #ffffff;
                font-family: 'Poppins', sans-serif;
                font-size: 14px;
                padding: 10px 20px;
            }
            .custom-swal-toast .swal2-icon {
                margin-right: 8px;
                font-size: 16px;
            }
            .swal2-toast .swal2-title {
                font-size: 16px;
                font-weight: bold;
                color: #ffffff;
            }
    
        </style>
        <% if (successMessage && successMessage.length) { %>
            <script>
                Swal.fire({
                    toast: true,
                    position: 'top-end',
                    icon: '<%= successMessage ? "success" : "error" %>',
                    title: '<%= successMessage || errorMessage %>',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    background: '<%= successMessage ? "linear-gradient(90deg, #56ab2f, #a8e063)" : "linear-gradient(90deg, #ff416c, #ff4b2b)" %>',
                    customClass: {
                        popup: 'rounded-lg shadow-md',
                    },
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer);
                        toast.addEventListener('mouseleave', Swal.resumeTimer);
                    }
                });
            </script>
        <% } %>
    
        <% if (errorMessage && errorMessage.length) { %>
            <script>
                 Swal.fire({
                toast: true,
                position: 'top-end',
                icon: 'error',
                title: '<%= errorMessage %>',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                background: 'linear-gradient(90deg, #ff416c, #ff4b2b)', /* Gradient Background */
                customClass: {
                    popup: 'custom-swal-toast',
                },
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer);
                    toast.addEventListener('mouseleave', Swal.resumeTimer);
                }
            });
            </script>
        <% } %>   
        
        <style>
        body, html {
            height: 100%;
            overflow: hidden;
        }
        .scrollable-container {
            height: calc(100vh - 2rem);
            overflow-y: auto;
        }
        .product-image {
            height: 200px;
            object-fit: cover;
        }
        .card-img-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .filter-section {
            position: sticky;
            top: 1rem;
            max-height: calc(100vh - 2rem);
            overflow-y: auto;
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
        }
        .filter-section h5 {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }
        .btn-outline-primary {
            border-width: 1px;
            font-size: 0.9rem;
            padding: 0.375rem 1rem;
        }
        .btn-check:checked + .btn-outline-primary {
            background-color: #0d6efd;
            color: white;
        }
        .filter-group {
            margin-bottom: 2rem;
        }
        .filter-group:last-child {
            margin-bottom: 0;
        }
        @media (max-width: 991.98px) {
            body, html {
                height: auto;
                overflow: auto;
            }
            .scrollable-container {
                height: auto;
                overflow-y: visible;
            }
            .filter-section {
                position: static;
                max-height: none;
                overflow-y: visible;
                margin-bottom: 2rem;
            }
        }
        .carousel {
            width: 100%;
            margin-bottom: 2rem;
            }

            .carousel-inner {
            width: 100%;
            }

            .carousel-item img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            }

            @media (max-width: 768px) {
            .carousel-item img {
                height: 300px;
            }
            }
            .product-image {
                      height: 200px;
                      object-fit: cover;
                      border-radius: 4px;
                    }
                    
                    .product-card {
                      transition: all 0.3s ease;
                    }
                    
                    .product-card:hover {
                      transform: translateY(-5px);
                      box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;
                    }
                  
                    .card-title {
                      font-size: 0.95rem;
                      line-height: 1.4;
                    }
                  
                    /* Responsive breakpoints */
                    @media (max-width: 1200px) {
                      .row-cols-lg-5 > * {
                        flex: 0 0 auto;
                        width: 20%;
                      }
                    }
                  
                    @media (max-width: 992px) {
                      .row-cols-md-3 > * {
                        flex: 0 0 auto;
                        width: 33.333333%;
                      }
                      .product-image {
                        height: 180px;
                      }
                    }
                  
                    @media (max-width: 768px) {
                      .row-cols-sm-2 > * {
                        flex: 0 0 auto;
                        width: 50%;
                      }
                    }
                  
                    @media (max-width: 576px) {
                      .row-cols-1 > * {
                        width: 100%;
                      }
                      .product-image {
                        height: 160px;
                      }
                    }

    </style>
</head>
<body>

<div class="container-fluid mt-4">
    <div class="row">
        Aside with filters
       
           
      
        <!-- Main content area -->

            <div class="scrollable-container">
                <div class="position-relative mb-4">
                    <div id="productCarousel" class="carousel slide" data-bs-ride="carousel" >
                      <div class="carousel-inner">
                        <div class="carousel-item active">
                          <img src="/uploads/product-images/carousel-1.webp" class="d-block w-100" alt="Carousel Image 1" style="height: 400px; object-fit: cover;">
                        </div>
                        <div class="carousel-item">
                          <img src="/uploads/product-images/carousel-2.webp" class="d-block w-100" alt="Carousel Image 2" style="height: 400px; object-fit: cover;">
                        </div>
                        <div class="carousel-item">
                          <img src="/uploads/product-images/carousel-3.webp" class="d-block w-100" alt="Carousel Image 3" style="height: 400px; object-fit: cover;">
                        </div>
                      </div>
                      <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                      </button>
                      <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                      </button>
                    </div>
                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center" style="z-index: 1;">
                      <h2 class="text-center text-white" style="font-size: 3rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Sit Well</h2>
                    </div>
                    
                  </div>

                  <div class="container-fluid">
                    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-4">
                      <% if (products.length === 0) { %>
                        <div class="col-12">
                          <div class="alert alert-info" role="alert">
                            No products available for the selected filters.
                          </div>
                        </div>
                      <% } else { %>
                        <% products.forEach(product => { %>
                          <div class="col">
                            <div class="card h-100 shadow-sm border-0 product-card">
                              <div class="position-relative">
                                <a href="/productDetails/<%= product._id %>" class="text-decoration-none">
                                  <img src="/uploads/product-images/<%= product.productImage[0] %>" class="card-img-top product-image" alt="<%= product.productName %>">
                                </a>
                              </div>
                              <div class="card-body d-flex flex-column">
                                <h5 class="card-title text-truncate text-dark"><%= product.productName %></h5>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                  <div>
                                    <span class="text-muted text-decoration-line-through">₹<%= product.regularPrice %></span>
                                    <span class="text-dark fw-bold ms-2">₹<%= product.salePrice %></span>
                                  </div>
                                </div>
                                <div class="mb-2">
                                  <% if (product.quantity <= 0) { %>
                                    <div class="sold-out-overlay">
                                      <span class="badge bg-danger">Sold Out</span>
                                    </div>
                                  <% } else if (product.quantity <= 5) { %>
                                    <div class="low-stock-overlay">
                                      <span class="badge bg-warning text-dark">Only <%= product.quantity %> left</span>
                                    </div>
                                  <% } %>
                                  <% if (product.quantity > 5) { %>
                                    <small class="badge bg-success">In Stock</small>
                                  <% } %>
                                </div>
                                <a href="/productDetails/<%= product._id %>" class="btn btn-outline-dark mt-auto">View Details</a>
                              </div>
                            </div>
                          </div>
                        <% }); %>
                      <% } %>
                    </div>
                  </div>
                  
                  <style>
                   
                  </style>
                <!-- Best Sellers Section -->
                <section class="mt-5 mb-4">
                    <div class="text-center">
                        <a href="/shop" class="btn btn-outline-dark mt-2">View More</a>

                    </div>
                </section>
            </div>
    </div>
</div>




<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let submitTimeout;
    function debounceSubmit() {
        clearTimeout(submitTimeout);
        submitTimeout = setTimeout(() => {
            document.getElementById('sortForm').submit();
        }, 300);
    }

   
</script>
</body>
    <%-include('../../views/partials/user/footer.ejs')%>